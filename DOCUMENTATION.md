# Документация

### Модели
- Нода (Node)
```json
{
    "ID": uint
    "Type": uint // 1 - Transit, 2 - Production
    "Position": {"X": float64, "Y": float64}
    "Data": any // Допольнительные данные
    "Radius": float64
    "BuildProgress": bool // Значение от 0 до 1, если 1 то нода построена
}
```

- Юнит (Unit)
```json
{
    "Type": uint // 1 - Idle, 2 - Production, 3 - Builder
    "Node": Node // см. выше
    "Action": Action // см. ниже
}
```

- Действие юнита (Action)
```json
{
    "Type": // 1 - Moving, 2 - Production, 3 - Building
    "Data": any // Данные, зависящие от типа
}

// MovingData
{
    "Speed": float64
    "Node": Node // К этой ноде движется юнит
    "Progress": float64 // Значение от 0 до 1, обозначающее продвижение по дороге от одной ноде к другой
}

// ProductionData 
{
    "Progress": float64
}

// BuildingData
{}
```


### Оп коды
- 1) Получение стэйта (пока не реализовано, еще не уверен нужно ли нам это)
- 2) Строительство ноды
  - Вид запроса:
    ```json
    {
        "FromNodeID": uint // От какой ноды строить путь до новой
        "Type": uint // Тип ноды, описан ниже
        "Position": {"X": float64, "Y": float64} // Позиция новой ноды
        "Data": any // Допольнительный данные, описаны ниже
    }
    ```
  - Типы нод:
    1) Транзитная нода
    2) Производственная нода
       - Данные, тип `uint` (поле `Data`):
         1) Производит новых юнитов
         2) Производит материал (пока одного типа)
  - Вид ответа:
    1) Успех: `{}` (пустой объект)
    2) Ошибка: `{"error": string}`

### Обновление в реальном времени
Каждый тик по сокету отправляется данные о юнитах, в таком виде:
```json
{
    "Units": map[UserID][]Unit // Мапа, где ключ это UserID, а значение массив юнитов
}
```